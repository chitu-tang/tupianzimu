# 图片字幕生成器 PRD (Product Requirement Document)

## 1. 需求概述
提供一个“图片字幕生成器”网页工具，支持上传图片并在底部按行渲染字幕。
每一行字幕文字背后都有相同样式的背景条，形成整齐的“切割感”（分隔线/条带效果）。
用户可配置字幕区域高度、字体大小、字体颜色、描边/轮廓颜色，并输入多行文本。
支持实时预览、导出生成图、保存原图+字幕图。

## 2. 用户角色与场景
- **普通创作者**：为图片海报、社媒配图快速生成底部分行字幕。
- **设计同学**：需要统一风格的底部字幕条带，保证排版干净规整。
- **内容运营**：批量制作话题图，希望快速调整行距与字体样式。

## 3. 核心功能

### 3.1 图片上传
- **本地文件选择**：支持常见格式（png, jpg, jpeg, webp）。
- **显示**：读取后在画布中居中/自适应显示。

### 3.2 字幕输入
- **多行输入**：文本框支持多行输入；每一行作为一条独立字幕。
- **空行处理**：保留空行，空行也渲染为背景条但无文字（可配置是否显示）。

### 3.3 样式配置
- **字幕高度(px)**：控制底部可用的整体字幕区域高度。
- **字体大小(px)**：影响各行文字大小。
- **字体颜色**：默认白色；支持颜色选择器与十六进制输入。
- **轮廓颜色**：默认黑色；用于提升可读性。
- **行条带样式**（核心特征：切割感）：
    - **背景条颜色**：默认半透明深色（如 `rgba(0,0,0,0.35)`）。
    - **条带高度**：由字体大小与内边距计算（自动）。
    - **行间间距**：固定或可调；默认固定间隔形成清晰分隔。
    - **条带左右内边距**：保证文字不贴边，默认 24px。

### 3.4 预览
- **实时渲染**：在画布内渲染上传图片 + 底部字幕区域。
- **自动刷新**：随参数变动自动刷新。

### 3.5 导出与保存
- **生成字幕图片**：导出合成后的单张图片（png）。
- **保存图片**：支持保存合成后的图片至本地。

## 4. 交互与信息架构
- **顶部**：标题“图片字幕生成器”
- **文件选择区**：文件选择器按钮 + 当前文件名展示
- **参数配置区**：
    - 字幕高度 (Input)
    - 字体大小 (Input)
    - 字体颜色 (Color Picker)
    - 轮廓颜色 (Color Picker)
- **文本输入区**：多行文本域 (Textarea)
- **操作按钮区**：
    - “生成字幕图片”
    - “保存图片”
- **预览区**：画布（Canvas），显示合成效果
- **反馈**：错误提示（不支持格式等）

## 5. 默认值与边界条件
- **字幕高度**：默认 `40` (px)
- **字体大小**：默认 `20` (px)
- **字体颜色**：默认 `#FFFFFF`
- **轮廓颜色**：默认 `#000000`
- **条带背景**：默认 `rgba(0,0,0,0.35)`
- **最大图片尺寸**：建议限制最长边不超过 4096px（前端缩放或原尺寸绘制）。
- **最大行数**：建议限制 50 行。

## 6. 布局与渲染细则
- **底部区域计算**：
    - 有效宽度 = 画布宽度 - 2 × 左右内边距
    - 行条带高度 = 字体大小 + 2 × 行内边距（如 8px）
    - 起始位置 = 图片底部向上推算
- **文字对齐**：
    - 默认水平居中、垂直居中显示在条带内。
- **文字描边**：
    - 使用 Canvas 的 `strokeText` + `fillText` 组合。
    - 描边宽度随字体大小（如 fontSize/10）自动设定或固定。

## 7. 技术栈建议
- **核心逻辑**：HTML5 Canvas API 用于图像处理与文字渲染。
- **框架**：原生 HTML/JS 即可，或使用 Vue/React 快速构建 UI。
- **样式**：CSS3 / TailwindCSS。

## 8. 验收标准
1.  在示例图上可复现底部多行、等样式条带，具有明显“切割感”。
2.  参数调整后预览同步变化，导出结果与预览一致。
3.  界面布局整洁，操作流畅。
